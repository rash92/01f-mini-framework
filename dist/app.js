(()=>{"use strict";const e=e=>e.startsWith("on"),t=t=>"children"!==t&&!e(t),o=(e,t)=>o=>e[o]!==t[o],l=e=>e.toLowerCase().substring(2);function n(n,a,c){var i;c?(Object.keys(a).filter(e).filter((e=>!(e in c)||o(a,c)(e))).forEach((e=>n.customRemoveEventListener(l(e),a[e]))),Object.keys(a).filter(t).filter((i=c,e=>!(e in i))).forEach((e=>{n[e]=""})),Object.keys(c).filter(t).filter(o(a,c)).forEach((e=>{n[e]=c[e]})),Object.keys(c).filter(e).filter(o(a,c)).forEach((e=>n.customAddEventListener(l(e),c[e])))):console.log("unable to update dom, nextProps passed in is: ",c)}function a(e,t){console.log("trying to delete fiber: ",e),e.dom?t.removeChild(e.dom):a(e.firstChild,t)}function c(e){if(!e)return;let t=e.parent;for(;!t.dom;)t=t.parent;const o=t.dom;if("APPEND"===e.effectTag&&null!=e.dom)o.appendChild(e.dom);else if("UPDATE"===e.effectTag&&null!=e.dom)n(e.dom,e.alternate.props,e.props);else if("DELETE"===e.effectTag)return void a(e,o);c(e.firstChild),c(e.sibling)}let i=null,s=null,r=null,d=null;requestIdleCallback((function e(t){let o=!1;for(;i&&!o;)i=m(i),o=t.timeRemaining()<1;!i&&s&&(d.forEach(c),c(s.firstChild),r=s,s=null),requestIdleCallback(e)}));let u=null,p=null;function m(e){if(e&&e.type||console.log("issue performing unit of work for fiber: ",e),e.type instanceof Function?function(e){u=e,p=0,u.hooks=[];const t=[e.type(e.props)];f(e,t.flat())}(e):function(e){e.dom||(e.dom=function(e){const t="TEXT_ELEMENT"==e.type?document.createTextNode(""):document.createElement(e.type);return t.customAddEventListener=(e,o)=>{switch(e){case"click":t.onclick=o;break;case"dblclick":t.ondblclick=o;break;case"keydown":t.onkeydown=o;break;case"mouseover":t.onmouseover=o;break;case"input":t.oninput=o;break;default:console.log("can't add event to listner: unknown event type")}},t.customRemoveEventListener=(e,o)=>{switch(e){case"click":t.onclick=null;break;case"dblclick":t.ondblclick=null;break;case"keydown":t.onkeydown=null;break;case"mouseover":t.onmouseover=null;break;case"input":t.oninput=null;break;default:console.log("can't remove event from listener: unknown event type to remove")}},n(t,{},e.props),t}(e)),e.props||console.log("fiber.props missing, fiber is: ",e),f(e,e.props.children.flat())}(e),e.firstChild)return e.firstChild;let t=e;for(;t;){if(t.sibling)return t.sibling;t=t.parent}}function f(e,t){let o=null,l=0,n=e.alternate&&e.alternate.firstChild;for(;l<t.length||null!=n;){const a=t[l];let c=null;const i=n&&a&&a.type==n.type;i&&(c={type:n.type,props:a.props,dom:n.dom,parent:e,alternate:n,effectTag:"UPDATE"}),a&&!i&&(c={type:a.type,props:a.props,dom:null,parent:e,alternate:null,effectTag:"APPEND"}),n&&!i&&(n.effectTag="DELETE",d.push(n)),n&&(n=n.sibling),0===l?e.firstChild=c:a&&(o.sibling=c),o=c,l++}}const k=function(e,t){for(var o=arguments.length,l=new Array(o>2?o-2:0),n=2;n<o;n++)l[n-2]=arguments[n];return{type:e,props:{...t,children:l.map((e=>"object"==typeof e?e:{type:"TEXT_ELEMENT",props:{nodeValue:e,children:[]}}))}}},h=function(e,t){s={dom:t,props:{children:[e]},alternate:r},d=[],i=s},g=function(e){const t=u.alternate&&u.alternate.hooks&&u.alternate.hooks[p],o={state:t?t.state:e,queue:[]};return(t?t.queue:[]).forEach((e=>{o.state=e(o.state)})),u.hooks.push(o),p++,[o.state,e=>{o.queue.push(e),s={dom:r.dom,props:r.props,alternate:r},i=s,d=[]}]},b=function(e){let t=window.location.hash.slice(2),o=!1;for(let l in e)t===l&&(e[l](),o=!0);o||console.log("route not found")};function y(e){let{onEnter:t}=e;return k("header",{className:"header"},k("h1",null,"todos"),k("div",{className:"input-container"},k("input",{id:"todo-input",className:"new-todo",type:"text",placeholder:"What needs to be done?",value:"",onKeyDown:t,autofocus:!0})))}function E(e){let{taskList:t,onDelete:o,onToggleComplete:l,onEsc:n,route:a}=e;return"all"===a?k("main",{className:"main"},k("ul",{className:"todo-list"},t.map(((e,t)=>k(v,{completed:e.completed,id:e.id,onToggleComplete:l,onDelete:o,text:e.task}))))):"completed"==a?k("main",{className:"main"},k("ul",{className:"todo-list"},t.filter((e=>e.completed)).map(((e,t)=>k(v,{completed:e.completed,id:e.id,onToggleComplete:l,onDelete:o,text:e.task}))))):"active"===a?k("main",{className:"main"},k("ul",{className:"todo-list"},t.filter((e=>!e.completed)).map(((e,t)=>k(v,{completed:e.completed,id:e.id,onToggleComplete:l,onDelete:o,text:e.task}))))):void 0}function v(e){let{text:t,id:o,onToggleComplete:l,onDelete:n,completed:a}=e;const[c,i]=g(!1),s=e=>{"Enter"===e.key&&(console.log("enter key detected in: ",o),i((e=>!1))),"Escape"===e.key&&console.log("esc key detected on item with id: ",o)},r=k("div",{className:"view"},k("input",{className:"toggle",type:"checkbox",onClick:()=>{l(o)},checked:a}),k("label",{for:"",onDblclick:()=>{console.log("double click detected on item with id: ",o),i((e=>!0))},onKeyDown:s},"To do item id: ",o,": ",t,", "),k("button",{className:"destroy",onClick:()=>n(o)})),d=k("div",{className:"view"},k("input",{onKeyDown:s,label:"Edit Todo Input",defaultValue:t}));return k("li",null,c?d:r)}function C(e){let{onClear:t,completedCount:o}=e;return k("footer",{className:"footer"},k("span",{className:"todo-count"},o," items left"),k("ul",{className:"filters"},k("li",null,k("a",{href:"#/all"},"all")),k("li",null,k("a",{href:"#/active"},"active")),k("li",null,k("a",{href:"#/completed"},"completed"))),k("button",{className:"clear-completed",onClick:t},"Clear Completed"))}const T=k("footer",{className:"info"},k("p",null,"Double-click to edit a todo"),k("p",null,"Created by the TodoMVC Team"),k("p",null,"Part of ",k("a",{href:"http://todomvc.com"},"TodoMVC")));h(k((function(){const[e,t]=g([]),[o,l]=g("all"),n=e.filter((e=>!e.completed)).length,a={all:()=>l((()=>"all")),completed:()=>l((()=>"completed")),active:()=>l((()=>"active")),"":()=>l((()=>"all"))};return window.onhashchange=()=>b(a),[k("section",{id:"root",className:"todoapp"},k(y,{onEnter:e=>{if("Enter"===e.key){const o={task:e.target.value,id:crypto.randomUUID(),completed:!1};t((e=>[...e,o])),e.target.value=""}}}),k(E,{taskList:e,onDelete:e=>{t((t=>[...t.filter((t=>t.id!==e))]))},onToggleComplete:e=>{t((t=>t.map((t=>t.id===e?{...t,completed:!t.completed}:t))))},route:o}),k(C,{onClear:()=>{const o=e.filter((e=>e.completed));console.log("before full task list: ",e,"completed tasklist: ",o),t((e=>[...e.filter((e=>!e.completed))])),console.log("after full task list: ",e,"completed tasklist: ",o)},completedCount:n})),T]}),null),document.body)})();