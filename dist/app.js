(()=>{"use strict";const e=e=>e.startsWith("on"),l=l=>"children"!==l&&!e(l),t=(e,l)=>t=>e[t]!==l[t],o=e=>e.toLowerCase().substring(2);function n(n,a,c){var s;c?(Object.keys(a).filter(e).filter((e=>!(e in c)||t(a,c)(e))).forEach((e=>n.customRemoveEventListener(o(e),a[e]))),Object.keys(a).filter(l).filter((s=c,e=>!(e in s))).forEach((e=>{n[e]=""})),Object.keys(c).filter(l).filter(t(a,c)).forEach((e=>{n[e]=c[e]})),Object.keys(c).filter(e).filter(t(a,c)).forEach((e=>n.customAddEventListener(o(e),c[e])))):console.log("unable to update dom, nextProps passed in is: ",c)}function a(e,l){console.log("trying to delete fiber: ",e),e.dom?l.removeChild(e.dom):a(e.firstChild,l)}function c(e){if(!e)return;let l=e.parent;for(;!l.dom;)l=l.parent;const t=l.dom;if("APPEND"===e.effectTag&&null!=e.dom)t.appendChild(e.dom);else if("UPDATE"===e.effectTag&&null!=e.dom)n(e.dom,e.alternate.props,e.props);else if("DELETE"===e.effectTag)return void a(e,t);c(e.firstChild),c(e.sibling)}let s=null,i=null,r=null,d=null;requestIdleCallback((function e(l){let t=!1;for(;s&&!t;)s=m(s),t=l.timeRemaining()<1;!s&&i&&(d.forEach(c),c(i.firstChild),r=i,i=null),requestIdleCallback(e)}));let p=null,u=null;function m(e){if(e&&e.type||console.log("issue performing unit of work for fiber: ",e),e.type instanceof Function?function(e){p=e,u=0,p.hooks=[];const l=[e.type(e.props)];f(e,l.flat())}(e):function(e){e.dom||(e.dom=function(e){const l="TEXT_ELEMENT"==e.type?document.createTextNode(""):document.createElement(e.type);return l.customAddEventListener=(e,t)=>{switch(e){case"click":l.onclick=t;break;case"dblclick":l.ondblclick=t;break;case"keydown":l.onkeydown=t;break;case"mouseover":l.onmouseover=t;break;case"input":l.oninput=t;break;default:console.log("can't add event to listner: unknown event type")}},l.customRemoveEventListener=(e,t)=>{switch(e){case"click":l.onclick=null;break;case"dblclick":l.ondblclick=null;break;case"keydown":l.onkeydown=null;break;case"mouseover":l.onmouseover=null;break;case"input":l.oninput=null;break;default:console.log("can't remove event from listener: unknown event type to remove")}},n(l,{},e.props),l}(e)),e.props||console.log("fiber.props missing, fiber is: ",e),f(e,e.props.children.flat())}(e),e.firstChild)return e.firstChild;let l=e;for(;l;){if(l.sibling)return l.sibling;l=l.parent}}function f(e,l){let t=null,o=0,n=e.alternate&&e.alternate.firstChild;for(;o<l.length||null!=n;){const a=l[o];let c=null;const s=n&&a&&a.type==n.type;s&&(c={type:n.type,props:a.props,dom:n.dom,parent:e,alternate:n,effectTag:"UPDATE"}),a&&!s&&(c={type:a.type,props:a.props,dom:null,parent:e,alternate:null,effectTag:"APPEND"}),n&&!s&&(n.effectTag="DELETE",d.push(n)),n&&(n=n.sibling),0===o?e.firstChild=c:a&&(t.sibling=c),t=c,o++}}const g=function(e,l){for(var t=arguments.length,o=new Array(t>2?t-2:0),n=2;n<t;n++)o[n-2]=arguments[n];return{type:e,props:{...l,children:o.map((e=>"object"==typeof e?e:{type:"TEXT_ELEMENT",props:{nodeValue:e,children:[]}}))}}},k=function(e,l){i={dom:l,props:{children:[e]},alternate:r},d=[],s=i},h=function(e){const l=p.alternate&&p.alternate.hooks&&p.alternate.hooks[u],t={state:l?l.state:e,queue:[]};return(l?l.queue:[]).forEach((e=>{t.state=e(t.state)})),p.hooks.push(t),u++,[t.state,e=>{t.queue.push(e),i={dom:r.dom,props:r.props,alternate:r},s=i,d=[]}]},b=function(e){let l=window.location.hash.slice(2),t=!1;for(let o in e)l===o&&(e[o](),t=!0);t||console.log("route not found")};function y(e){let{onEnter:l}=e;return g("header",{className:"header"},g("h1",null,"todos"),g("div",{className:"input-container"},g("input",{id:"todo-input",className:"new-todo",type:"text",placeholder:"What needs to be done?",value:"",onKeyDown:l,autofocus:!0})))}function v(e){let{taskList:l,onDelete:t,onToggleComplete:o,onEsc:n,route:a,onToggleAll:c}=e;return"all"===a?g("main",{className:"main"},g("div",{className:"toggle-all-container"},g("input",{className:"toggle-all"},"toggle complete"),g("label",{className:"toggle-all-label",htmlfor:"toggle-all",onClick:c},"Toggle All Input")),g("ul",{className:"todo-list"},l.map(((e,l)=>g(E,{completed:e.completed,id:e.id,onToggleComplete:o,onDelete:t,text:e.task}))))):"completed"==a?g("main",{className:"main"},g("div",{className:"toggle-all-container"},g("input",{className:"toggle-all"},"toggle complete"),g("label",{className:"toggle-all-label",htmlfor:"toggle-all",onClick:c},"Toggle All Input")),g("ul",{className:"todo-list"},l.filter((e=>e.completed)).map(((e,l)=>g(E,{completed:e.completed,id:e.id,onToggleComplete:o,onDelete:t,text:e.task}))))):"active"===a?g("main",{className:"main"},g("div",{className:"toggle-all-container"},g("input",{className:"toggle-all"},"toggle complete"),g("label",{className:"toggle-all-label",htmlfor:"toggle-all",onClick:c},"Toggle All Input")),g("ul",{className:"todo-list"},l.filter((e=>!e.completed)).map(((e,l)=>g(E,{completed:e.completed,id:e.id,onToggleComplete:o,onDelete:t,text:e.task}))))):void 0}function E(e){let{text:l,id:t,onToggleComplete:o,onDelete:n,completed:a}=e;const[c,s]=h(!1),i=e=>{"Enter"===e.key&&(console.log("enter key detected in: ",t),s((e=>!1))),"Escape"===e.key&&console.log("esc key detected on item with id: ",t)},r=g("div",{className:"view"},g("input",{className:"toggle",type:"checkbox",onClick:()=>{o(t)},checked:a}),g("label",{for:"",onDblclick:()=>{console.log("double click detected on item with id: ",t),s((e=>!0))},onKeyDown:i},"To do item id: ",t,": ",l,","," "),g("button",{className:"destroy",onClick:()=>n(t)})),d=g("div",{className:"view"},g("input",{onKeyDown:i,label:"Edit Todo Input",defaultValue:l}));return g("li",null,c?d:r)}function C(e){let{onClear:l,completedCount:t}=e;return g("footer",{className:"footer"},g("span",{className:"todo-count"},t," items left"),g("ul",{className:"filters"},g("li",null,g("a",{href:"#/all"},"all")),g("li",null,g("a",{href:"#/active"},"active")),g("li",null,g("a",{href:"#/completed"},"completed"))),g("button",{className:"clear-completed",onClick:l},"Clear Completed"))}const N=g("footer",{className:"info"},g("p",null,"Double-click to edit a todo"),g("p",null,"Created by the TodoMVC Team"),g("p",null,"Part of ",g("a",{href:"http://todomvc.com"},"TodoMVC")));k(g((function(){const[e,l]=h([]),[t,o]=h("all"),n=e.filter((e=>!e.completed)).length,a={all:()=>o((()=>"all")),completed:()=>o((()=>"completed")),active:()=>o((()=>"active")),"":()=>o((()=>"all"))};return window.onhashchange=()=>b(a),[g("section",{id:"root",className:"todoapp"},g(y,{onEnter:e=>{if("Enter"===e.key){const t={task:e.target.value,id:crypto.randomUUID(),completed:!1};l((e=>[...e,t])),e.target.value=""}}}),g(v,{taskList:e,onDelete:e=>{l((l=>[...l.filter((l=>l.id!==e))]))},onToggleComplete:e=>{l((l=>l.map((l=>l.id===e?{...l,completed:!l.completed}:l))))},onToggleAll:()=>{l((e=>e.map((e=>({...e,completed:!e.completed})))))},route:t}),g(C,{onClear:()=>{const t=e.filter((e=>e.completed));console.log("before full task list: ",e,"completed tasklist: ",t),l((e=>[...e.filter((e=>!e.completed))])),console.log("after full task list: ",e,"completed tasklist: ",t)},completedCount:n})),N]}),null),document.body)})();